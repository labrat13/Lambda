1. у многих трансиверов есть пин слип-моде, в спящем режиме они не влияют на шину, но слушают ее. Передают состояние шины на пин RX.
2. трансиверы различаются мелкими фишками и обещают до 110 устройств на шине, стойкость к ЭМИ, малое собственное излучение ЭМИ, итп.
- малое собственное излучение - это интересно. А то костюм будет сильно фонить...
3. линия с концов должна быть нагружена на сопротивление 120 ом. 
  Требуются 2 резистора по 120 ом на всю шину.
- но где они будут размещаться? Это терминаторы на концах линии должны быть.
- предложить сделать специальные модули-терминаторы на концах шины? Или добавить в них 2 перемычки, чтобы подключить резисторы-терминаторы к шине внутри модуля?
  - модули должны быть по возможности залиты в эпоксидку. Перемычки как часть стандарта модуля - не годятся.
  - проще тогда специальные модули-терминаторы сделать: 2 резистора и конденсатор на разъеме стандарта 10-пин. Только зачем там разъем? Можно просто на шину запаять.
4. некоторые чипы содержат еще и вывод Vref=V/2. Это, как описано для TJA1040, подтяжка шины к середине, чтобы шину не заклинило из-за неправильно работающего или обесточенного трансивера. Там цепочка из двух резисторов: CANH-60ом-Vref-60ом-CANL и конденсатора 4700пф между Vref и Gnd. Эта цепочка заменяет резистор-терминатор.
5. более-менее подробно терминатор описан в даташите на SN55HVD251, там же есть разводка печатной платы, но перегруженная авосями.
- еще больше терминаторов в даташите на MAX13050.
6. По шине питания достаточно одного керамического конденсатора 0.1мкф на лапах трансивера.
7. Шину хорошо бы защитить от EMI при помощи Transient Voltage Suppressors (TVS), они быстродействующие и малой емкости.
  - лучше найти готовую входную цепь от разъема до трансивера - там еще конденсаторы и TVS какие-то должны быть. Самому тыкаться - глупо: тестировать нечем, не на чем и некогда. 
8. Встроенные в чип подтягивающие резисторы на интерфейсные пины - слабые, а для микроконтроллера нужны внешние на 1..10ком.
9. Если питание любого устройства будет ниже нормального, на всей шине будут проблемы. 
  - это может нарушить работу системы, так как команды на управление питанием тоже передаются по шине. Если шина зависнет, команды управления не дойдут до контроллера питания, и питание нельзя будет переконфигурировать.
    - надо ввести мониторинг питания на самом контроллере питания, и автономное принятие им решения, если центральный процессор не отвечает.
10. разводка печатной платы
- For the PCB design to be successful, start with the design of the protection and filtering circuitry because ESD and EFT transients have a wide frequency bandwidth from approximately 3-MHz to 3-GHz and high frequency layout techniques must be applied during PCB design. On chip IEC ESD protection is good for laboratory and portable equipment but is usually not sufficient for EFT and surge transients occurring in industrial environments.
Therefore, robust and reliable bus node design requires the use of external transient protection devices at the bus connectors. Placement at the connector also prevents these harsh transient events from propagating further into the PCB and system.
- Use VCC and ground planes to provide low inductance.
- High frequency current follows the path of least inductance and not the path of least
resistance.


