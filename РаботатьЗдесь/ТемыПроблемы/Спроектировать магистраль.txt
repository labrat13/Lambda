Спроектировать магистраль для костюма с шиной 2 провода: Д- Д+:

Определить список узлов магистрали:
- процессор 
- контроллер батареи А
- контроллер батареи Б
- рукавицы Левая и Правая
- ботинки Левый и Правый
- ... добавить позже другие модули костюма


9:28 11.06.2021
Предлагается CAN интерфейс.
- он используется в автомобилях для управления сиденьями и стеклоподъемникми итп.
- есть микроконтроллеры с CAN - в папке радиодата за 11.06.2021
-- там нет небольших контроллеров - только по 32 лапы минимум.
- есть микросхема входного-выходного драйвера L6ххх стоимостью 100 рублей.
-- таких на проект надо около 20 штук, если оно все не встроено уже в микроконтроллер.
--- Нет, не встроено.
- питание шины 7..30 вольт. Я думаю 12 вольт.
- напряжения на шине 3в, кажется.
- софт есть, хотя стандарт платный, я скачал что-то похожее на управляющий софт.
- документация есть, я скачал, надо изучать.
- управляющая шиной программа - довольно сложная, ее надо изучать, на маленьких чипах вроде ATTINY15 не влезет.
- STM32F051R8T6 у меня на демоплатах есть, но они не поддерживают CAN. 
  Надо закупить контроллер с CAN для изучения темы.
  - STM32F103RBT6 на Circle есть, он содержит CAN. Нужно проверить что выводы CAN доступны, припаять к ним драйвер CAN, развернуть Raisonance и написать новую прошивку.
  - возможно, на сайте Circle форума есть что-то для CAN. Надо поискать.
- я завел новый документ по CAN - CAN.txt. в нем вся тема про CAN дальше будет вестись.

17:47 29.06.2021
Материалы шины:
- стирать костюм предполагается водой с мылом/стиральным порошком.
- провод - желательно только МГТФ, его изоляция не повреждается растворителями и керосином.
- рукавицы часто пачкаются битумом, смазкой, краской. Их надо либо заменять, либо стирать в бензине/керосине.
  соответственно, их устройство не должно портиться от воды, бензина, керосина, растворителей.


17:38 29.06.2021
- для целей заземления нужна еще шина "масса", которая будет заземлена через ботинки.
 Она же будет служить общим уравнивающим/экранирующим контуром костюма, соединяться с запястьями рук и ног.
 Она же будет служить заземлителем для устройств костюма и их экранов.
- электрически соединить ее с проводом -12в шины, только в одной точке.
- ботинки должны будут иметь контакт заземления. 
  Его важно иметь возможность отключить, если требуется изоляция тела от земли.
- блок ДТЗ должен будет замерять ток, текущий через провод заземления.
  

17:51 29.06.2021 - шина в целом определена, вопрос в изготовлении и материалах.
Компоновка шины:
  Для костюма потребуется более 6 метров шины: +12в 10а, -12в 10а, +5в 2а, -5в 2а, Д- (до 100ма), Д+ (до 100ма), Масса (до 10а).
  Д- и Д+ в общем экране, соединяемом с Масса только в точке-источнике сигнала.
  - а где в этой системе источник сигнала?
    - видимо, следует соединять экраны звездой в точке сосредоточения сети. Вроде центрального хаба.
    - в точке, наиболее ближней к центру системы. Так как на ее концах наводки будут сильнее, а напряжение питания там меньше, чем в центре. 
- Следует изготовить 10м шины - с запасом на мою криворукость и эксперименты.
  Тогда надо 20м - чтобы уж точно хватило на все.  

Изготовление провода:
  Я пробовал собрать для CAN провод: экранированную витую пару МГТФ.
- перевил 2 куска провода МГТФ по 2 метра длиной, сделал 100 оборотов.
  Длина куска составила 198см - уменьшилась на 1% от перекрутки 50 оборотов на метр длины.
- идея всунуть эту витую пару вместо центральной жилы коаксиального кабеля - не удалась:
  Центральная жила кабеля слиплась прочно с оплеткой и не скользит по ней.
  У взятого кабеля оплетка слишком редкая и не позволяет ее сжать, чтобы расширить оплетку и извлечь центральную жилу.
- есть идея использовать кабель с более частой оплеткой, удалить внешнюю оболочку, чтобы получить доступ к оплетке,
  сжать ее, чтобы расширить в диаметре, и извлекать центральную жилу тем же способом, что и раньше.
  Затем надеть новую оболочку из термоусадочной трубки и термоусадить ее.
- другая идея - добыть советский экранированный провод, и все то же самое проделать сним.
  






